<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MetalMetric Pro — Signals & Alerts</title>
  <meta name="description" content="Pro signals + alerts plus practical tools for inflation awareness, goals, and physical metals valuation." />
  <meta name="page-tier" content="pro" />

  <link rel="manifest" href="/manifest.json" />
  <link rel="icon" href="/icon.svg" type="image/svg+xml" />
  <link rel="stylesheet" href="/styles.css" />

  <!-- Prevent flash: apply saved/system theme ASAP -->
  <script>
    (function () {
      try {
        const KEY = "mm_theme";
        const saved = localStorage.getItem(KEY);
        const prefersDark = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
        const theme = (saved === "dark" || saved === "light") ? saved : (prefersDark ? "dark" : "light");
        document.documentElement.setAttribute("data-theme", theme);
      } catch (e) {}
    })();
  </script>

  <style>
    /* =========================================================
       STRIPE CHECKOUT BUTTONS (Pro)
       - Monthly vs Yearly shades
       - Matches your premium UI
       ========================================================= */
    :root{
      --mmProMonthly: #2563eb;
      --mmProYearly:  #1d4ed8;
    }

    a.mmCheckoutBtn{
      display: inline-flex;
      width: 100%;
      justify-content: center;
      align-items: center;
      padding: 12px 14px;
      border-radius: 14px;
      text-decoration: none;
      font-weight: 900;
      border: 1px solid rgba(255,255,255,.14);
      background: var(--mmProMonthly);
      color: #fff !important;
      box-shadow: 0 10px 30px rgba(0,0,0,.10);
      transition: transform 160ms ease, filter 160ms ease;
    }
    a.mmCheckoutBtn:hover{ filter: brightness(1.06); transform: translateY(-1px); }
    a.mmCheckoutBtn:active{ filter: brightness(0.98); transform: translateY(0px) scale(0.99); }
    a.mmCheckoutBtn:focus-visible{ outline: 2px solid rgba(255,255,255,.35); outline-offset: 2px; }

    a.mmCheckoutBtn--yearly{ background: var(--mmProYearly); }

    .mmCheckoutRow{
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 2px;
    }
    .mmCheckoutRow a{ flex: 1 1 240px; }

    /* Make the theme toggle look like your existing pills */
    .btn2[aria-pressed="true"]{
      border-color: rgba(10,132,255,.25);
      background: rgba(10,132,255,.10);
      color: rgba(10,132,255,.95);
    }
  </style>
</head>

<body>
  <div class="pWrap">
    <div class="pTop">
      <a class="brandLink" href="/" aria-label="Back to dashboard">
        <span class="brandDot" aria-hidden="true"></span>
        <span>MetalMetric</span>
      </a>

      <div class="pNav">
        <a class="btn2" href="/">Dashboard</a>
        <a class="btn2" href="/elite">View Elite</a>

        <!-- Theme toggle (same storage key as dashboard: mm_theme) -->
        <button class="btn2" id="themeToggle" type="button" aria-pressed="false" title="Switch theme">
          <span class="ttIcon ttIconMoon" aria-hidden="true" style="display:none; margin-right:6px;">
            <svg viewBox="0 0 24 24" fill="none" width="16" height="16">
              <path d="M21 14.4A8.5 8.5 0 0 1 9.6 3a7 7 0 1 0 11.4 11.4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </span>
          <span class="ttIcon ttIconSun" aria-hidden="true" style="display:none; margin-right:6px;">
            <svg viewBox="0 0 24 24" fill="none" width="16" height="16">
              <path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" stroke="currentColor" stroke-width="2"/>
              <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </span>
          <span class="ttLabel">—</span>
        </button>

        <a class="btn2 pro" href="#get">Get Pro</a>
      </div>
    </div>

    <section class="heroCard">
      <div class="badgeRow">
        <span class="badge pro">PRO • Most Popular</span>
        <div class="priceTag" aria-label="Pricing">
          <span class="big">$9</span>
          <span class="small">/ month • cancel anytime</span>
        </div>
      </div>

      <h1 class="hTitle">Signals + alerts designed for serious GSR users.</h1>
      <p class="hSub">
        Pro upgrades your dashboard into a decision tool: a clear score, regime context, and alerts that trigger only when conditions matter.
        You also unlock practical “real life” tools—goal tracking, inflation awareness, and instant melt value—so metals aren’t just charts.
      </p>

      <div class="ctaRow" id="get">
        <a class="btn2" href="/elite" aria-label="Compare to Elite">Compare to Elite</a>
        <a class="btn2" href="#faq" aria-label="Read FAQs">FAQs</a>
      </div>

      <!-- Stripe-ready checkout CTAs -->
      <div class="mmCheckoutRow" id="checkout" aria-label="Subscribe to Pro">
        <a class="mmCheckoutBtn" href="#"
           data-checkout-plan="pro" data-checkout-interval="monthly">
          Get Pro (Monthly)
        </a>
        <a class="mmCheckoutBtn mmCheckoutBtn--yearly" href="#"
           data-checkout-plan="pro" data-checkout-interval="yearly">
          Get Pro (Yearly)
        </a>
      </div>

      <div class="note">
        If checkout isn’t wired yet, these buttons will error until <span class="muted">/api/create_checkout_session</span> is live.
        Once that API exists, this page is already production-ready.
      </div>

      <div class="grid2">
        <div class="panel">
          <h3 class="panelTitle">What you get in Pro</h3>
          <ul class="pBullets">
            <li><b>Buy/Sell Score (0–100)</b> + regime label</li>
            <li><b>10 alerts</b> (GSR, gold, silver thresholds)</li>
            <li><b>Crossing alerts</b> + cooldowns</li>
            <li><b>Email notifications</b> (Mailersend next)</li>
            <li><b>Chart overlays</b> (MA 20/50/200) + markers</li>
            <li><b>Backtesting snapshot</b> (30/90/180-day)</li>

            <li><b>Hedge-Linked Goal Tracker</b> (set goals + metal allocation suggestions)</li>
            <li><b>Category Inflation Alerts</b> (get nudges when inflation hits key categories)</li>
            <li><b>Smart Melt Value Calculator</b> (jewelry melt value from live spot)</li>
            <li><b>Hidden Assets Vault</b> (inventory + auto-updating values)</li>
          </ul>
        </div>

        <div class="panel">
          <h3 class="panelTitle">Why Pro is valuable</h3>
          <div class="checkGrid">
            <div class="checkRow">
              <div class="ic pro">1</div>
              <div>
                <b>Clarity over chaos</b>
                <span>Turn raw prices into a single score + regime so decisions are faster.</span>
              </div>
            </div>
            <div class="checkRow">
              <div class="ic pro">2</div>
              <div>
                <b>Fewer false alarms</b>
                <span>Cooldown logic reduces “noise” triggers.</span>
              </div>
            </div>
            <div class="checkRow">
              <div class="ic pro">3</div>
              <div>
                <b>Useful beyond charts</b>
                <span>Track goals, inflation pressure, and real-world metal value (melt + vault).</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="secHead">
        <h2>Premium-grade tools (in Pro)</h2>
        <div class="meta">Fast, practical, and actionable</div>
      </div>

      <div class="cards3">
        <div class="mini">
          <p class="t">Score + Regime</p>
          <p class="d">A simple 0–100 score + label so you instantly see risk-on vs risk-off conditions.</p>
        </div>
        <div class="mini">
          <p class="t">Melt Value</p>
          <p class="d">Instant jewelry melt value from live spot (grams/oz + purity presets).</p>
        </div>
        <div class="mini">
          <p class="t">Vault + Goals</p>
          <p class="d">Track valuables and goals with inflation-aware nudges that connect to metal signals.</p>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="secHead">
        <h2>Pro vs Free</h2>
        <div class="meta">What changes when you upgrade</div>
      </div>

      <div class="compare" role="region" aria-label="Comparison table">
        <table>
          <thead>
            <tr>
              <th>Feature</th>
              <th>Free</th>
              <th>Pro</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Live refresh + historical charts</td>
              <td class="yes">Yes</td>
              <td class="yes">Yes</td>
            </tr>
            <tr>
              <td>Buy/Sell Score (0–100) + regime label</td>
              <td class="no">—</td>
              <td class="yes">Included</td>
            </tr>
            <tr>
              <td>Alerts (threshold + crossing + cooldowns)</td>
              <td class="no">—</td>
              <td class="yes">10 alerts</td>
            </tr>
            <tr>
              <td>Chart overlays (MA 20/50/200) + markers</td>
              <td class="no">—</td>
              <td class="yes">Included</td>
            </tr>
            <tr>
              <td>Backtesting snapshot (30/90/180-day)</td>
              <td class="no">—</td>
              <td class="yes">Included</td>
            </tr>

            <tr>
              <td>Hedge-Linked Goal Tracker</td>
              <td class="no">—</td>
              <td class="yes">Included</td>
            </tr>
            <tr>
              <td>Category Inflation Alerts</td>
              <td class="no">—</td>
              <td class="yes">Included</td>
            </tr>
            <tr>
              <td>Smart Melt Value Calculator</td>
              <td class="no">—</td>
              <td class="yes">Included</td>
            </tr>
            <tr>
              <td>Hidden Assets Vault (inventory + live values)</td>
              <td class="no">—</td>
              <td class="yes">Included</td>
            </tr>

            <tr>
              <td>Priority data quality checks</td>
              <td class="no">—</td>
              <td class="yes">Included</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="section" id="faq">
      <div class="secHead">
        <h2>FAQs</h2>
        <div class="meta">Common questions</div>
      </div>

      <div class="faqGrid">
        <details>
          <summary>Is Pro worth it if I only check GSR occasionally?</summary>
          <p>If you only glance at GSR, Free is fine. Pro is for users who want signals + alerts and practical tools that reduce decision friction.</p>
        </details>
        <details>
          <summary>Will Pro spam my inbox?</summary>
          <p>No. Pro is built around cooldowns to reduce noise. You control your thresholds and alert types.</p>
        </details>
        <details>
          <summary>What are the “real life” Pro tools?</summary>
          <p>Goal tracking, category inflation alerts, melt value calculator, and a vault to track physical items with live values.</p>
        </details>
        <details>
          <summary>When do payments go live?</summary>
          <p>Next step: checkout + entitlements, then gated UI in your dashboard.</p>
        </details>
      </div>
    </section>

    <section class="finalCta pro">
      <div class="left">
        <b>Ready for Pro-grade signals?</b>
        <span>Premium UI first. Payments and access controls next.</span>
      </div>
      <div class="right" style="gap:10px;">
        <a class="btn2" href="/">Back to Dashboard</a>
        <a class="btn2 pro" href="#checkout">Choose Pro</a>
      </div>
    </section>

    <div class="note" style="margin-top:14px;">
      Tip: this page already supports Monthly/Yearly checkout. Once your backend returns a URL, you’re done.
    </div>
  </div>

  <!-- THEME TOGGLE (mm_theme) -->
  <script>
    (function(){
      const KEY = "mm_theme";
      const root = document.documentElement;
      const btn = document.getElementById("themeToggle");
      const label = btn ? btn.querySelector(".ttLabel") : null;
      const moon = btn ? btn.querySelector(".ttIconMoon") : null;
      const sun  = btn ? btn.querySelector(".ttIconSun")  : null;

      const getTheme = () => {
        const t = (root.getAttribute("data-theme") || "").toLowerCase();
        return (t === "dark" || t === "light") ? t : "light";
      };

      const apply = (theme) => {
        root.setAttribute("data-theme", theme);
        const isDark = theme === "dark";
        if (btn) btn.setAttribute("aria-pressed", isDark ? "true" : "false");
        if (label) label.textContent = isDark ? "Light" : "Dark";
        if (moon) moon.style.display = isDark ? "none" : "inline-flex";
        if (sun)  sun.style.display  = isDark ? "inline-flex" : "none";
        if (btn) btn.title = isDark ? "Switch to Light" : "Switch to Dark";
        try { localStorage.setItem(KEY, theme); } catch(e) {}
      };

      apply(getTheme());

      if (btn){
        btn.addEventListener("click", () => {
          const next = (getTheme() === "dark") ? "light" : "dark";
          apply(next);
        });
      }
    })();
  </script>

  <!-- STRIPE CHECKOUT WIRING (guarded) -->
  <script>
    (function () {
      try {
        if (window.__mmStripeCheckoutWired) return;
        window.__mmStripeCheckoutWired = true;

        const btns = Array.from(document.querySelectorAll("[data-checkout-plan][data-checkout-interval]"));
        if (!btns.length) return;

        async function go(plan, interval, el){
          const original = el ? el.textContent : "";
          try{
            if (el) {
              el.setAttribute("aria-busy", "true");
              el.style.pointerEvents = "none";
              el.textContent = "Redirecting…";
            }

            const res = await fetch("/api/create_checkout_session", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ plan, interval })
            });

            const text = await res.text();
            let data = null;
            try { data = JSON.parse(text); } catch {}

            if (!res.ok || !data?.ok || !data?.url) {
              throw new Error((data && (data.error || data.message)) || `Checkout failed (${res.status})`);
            }

            window.location.href = data.url;
          } finally {
            if (el) {
              el.removeAttribute("aria-busy");
              el.style.pointerEvents = "";
              el.textContent = original;
            }
          }
        }

        btns.forEach((a) => {
          a.addEventListener("click", (e) => {
            e.preventDefault();
            const plan = a.getAttribute("data-checkout-plan");
            const interval = a.getAttribute("data-checkout-interval");
            if (!plan || !interval) return;
            go(plan, interval, a).catch((err) => {
              console.warn("[stripe] checkout error:", err);
              alert(err?.message || "Checkout failed. Please try again.");
            });
          });
        });
      } catch (e) {
        console.warn("[stripe] wiring failed:", e);
      }
    })();
  </script>
</body>
</html>
